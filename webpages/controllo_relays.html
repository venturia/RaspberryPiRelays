<html>
<head>
<script>
stato()
function accensione(gpioch) {
   var xmlhttp = new XMLHttpRequest();
   xmlhttp.onreadystatechange = function() {
         if(xmlhttp.readyState == 1) {
             document.getElementById("accensioneBox").innerHTML = "In Attesa di accensione "+gpioch;
         }
         if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
             document.getElementById("accensioneBox").innerHTML = xmlhttp.responseText;
         }
   }
   xmlhttp.open("GET","/cgi-bin/relays/accensione_relays.py?"+gpioch,true);
   xmlhttp.send();
}
function spegnimento(gpioch) {
   var xmlhttp = new XMLHttpRequest();
   xmlhttp.onreadystatechange = function() {
         if(xmlhttp.readyState == 1) {
             document.getElementById("accensioneBox").innerHTML = "In Attesa di spegnimento "+gpioch;
         }
         if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
             document.getElementById("accensioneBox").innerHTML = xmlhttp.responseText;
         }
   }
   xmlhttp.open("GET","/cgi-bin/relays/spegnimento_relays.py?"+gpioch,true);
   xmlhttp.send();
}
function stato() {
   var xmlhttp = new XMLHttpRequest();
   xmlhttp.onreadystatechange = function() {
//         if(xmlhttp.readyState == 1) {
//             document.getElementById("statusBox").innerHTML = "In Attesa dello stato ";
//         }
         if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
             document.getElementById("statusBox").innerHTML = xmlhttp.responseText;
         }
   }
   xmlhttp.open("GET","/cgi-bin/relays/stato_relays.py",true);
   xmlhttp.send();
}
function accensione_stato(gpioch) {
   accensione(gpioch)
   stato()
}
function spegnimento_stato(gpioch) {
   spegnimento(gpioch)
   stato()
}
</script>
</head>
<body>
<H1> Controllo Relays </H1>

<H3>Accensione</H3>
<span id="statusBox"></span><br>
<button onclick="stato()">stato</button> <br>
<span id="accensioneBox"></span><br>

</body>
</html>
